let fileName=null,json=null,hasMore=!0;const objects_per_page=20,objects_pages={};function load(e){try{json=JSON.parse(new FileReaderSync().readAsText(e)),fileName=e.name}catch(t){console.log(t),postMessage({isValid:!1,json:null,fileName:e.name});return}next()}function next(e="root"){let t=e.split(":").slice(1),l=json;for(let n of t)l=l[n];l&&postMessage({isValid:!0,json:getInRange(l,e),fileName,keyName:e})}function getInRange(e,t){objects_pages[t]||(objects_pages[t]=0);let l=20*objects_pages[t],n=20*++objects_pages[t],o=Object.keys(e),s={};for(let a of o.slice(l,n)){let i=e[a];if("object"==typeof i&&null!==i){let c=Object.keys(i).length,g=t+":"+a;s[a]=getInRange(i,g),c>20&&(s[a]["..."]=g)}else s[a]=i}return"root"!==t&&o.length>n&&(s["..."]=t),s}onmessage=({data:e})=>{"load"===e.type&&load(e.file),"more"===e.type&&next(e.keyName)};