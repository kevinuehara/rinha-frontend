let fileName=null,json=null,hasMore=!0;const objects_per_page=20,objects_pages={};onmessage=({data:e})=>{"load"===e.type&&load(e.file),"more"===e.type&&next(e.keyName)};const load=e=>{try{json=JSON.parse(new FileReaderSync().readAsText(e)),fileName=e.name}catch(t){postMessage({isValid:!1,json:null,fileName:e.name});return}next()},next=(e="root")=>{let t=e.split(":").slice(1),l=json;for(let s of t)l=l[s];postMessage({isValid:!0,json:getInRange(l,e),fileName,keyName:e})},getInRange=(e,t)=>{objects_pages[t]||(objects_pages[t]=0);let l=20*objects_pages[t],s=20*++objects_pages[t],o=Object.keys(e),n={};for(let a of o.slice(l,s)){let g=e[a];if("object"==typeof g&&null!==g){let r=Object.keys(g).length,c=t+":"+a;n[a]=getInRange(g,c),r>20&&(n[a]["..."]=c)}else n[a]=g}return"root"!==t&&o.length>s&&(n["..."]=t),n};